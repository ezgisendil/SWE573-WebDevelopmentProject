
<article class="media content-section">
    <div class="media-body">
        <h2 class="article-title">{{ event.title }}</h2>
        <p class="article-content"> <small class="text-muted">Location: {{ event.location }} &emsp; Date: {{ event.date }} &emsp; Time: {{ event.time }} ({{ event.duration }} hrs)</small></p> 
        <p class="article-content"><small class="text-muted">Current Participants: {{ event.num_participant }} / {{ event.max_participant }}</small></p>
        <p class="article-content">{{ event.content }}</p>        
        {% if event.author == user %}
        <a class="btn btn-secondary btn-sm mt-1 mb-1" href="{% url 'event-update' event.id %}" type="submit">Update Event</a>
        <a class="btn btn-danger btn-sm mt-1 mb-1" href="{% url 'event-delete' event.id %}" type="submit">Delete Event</a>
        {% elif user.is_authenticated and user in event.waiting_participant.all %}
        <p class="article-content" style="color: green"><small>You have already applied for this event and your application is waiting.</small> </p>
        {% elif user.is_authenticated and user in event.current_participant.all %}
        <p class="article-content" style="color: green"><small>You have already enrolled for this event.</small></p>
        {% elif user.is_authenticated and event.num_participant >= event.max_participant %}
        <p class="article-content" style="color: red"><small>This event has already reached its limit and does not accept new applications.</small></p>
        {% elif user.is_authenticated %}
        <a class="btn btn-secondary btn-sm mt-1 mb-1" href="{% url 'event-apply' event.id %}" type="submit">Apply</a>
        {% else %}
        <p class="article-content" style="color: red"><small>You need to login to apply for an event.</small> </p>
        {% endif %}
        <p></p>
        {% if user == event.author %}
        <hr />
            <h5>Waiting Participants</h5>
            {% for participant in event.waiting_participant.all %}
                <p class="article-content" style="color: darkorange; font-size:small">{{participant.username}}: <a style="color:darkgreen" href="{% url 'event-action' event.id 'accept' participant.id %}">Accept</a> / <a style="color: darkred" href="{% url 'event-action' event.id 'reject' participant.id %}">Reject</a>
                </p>
            {% empty %}
            <p class="article-content" style="color: darkblue; font-size:small">There is no waiting participant yet.</p>
            {% endfor %}
            <hr />
            <h5>Current Participants</h5>
            {% for participant in event.current_participant.all %}
                <p class="article-content" style="color: darkorange; font-size:small">{{participant.username}} </p>
            {% empty %}
            <p class="article-content" style="color: darkblue; font-size:small">There is no current participant yet.</p>
            {% endfor %}
            <hr />

        {% else %}
        <hr />
        <h5>Waiting Participants</h5>
        {% for participant in event.waiting_participant.all %}
            <p class="article-content" style="color: darkorange; font-size:small">{{participant.username}}</p>
        {% empty %}
        <p class="article-content" style="color: darkblue; font-size:small">There is no waiting participant yet.</p>
        {% endfor %}
        <hr />
        <h5>Current Participants</h5>
        {% for participant in event.current_participant.all %}
            <p class="article-content" style="color: darkorange; font-size:small">{{participant.username}} </p>
        {% empty %}
        <p class="article-content" style="color: darkblue; font-size:small">There is no current participant yet.</p>
        {% endfor %}
        <hr />
        {% endif %}
        {% if user != event.author %}
        <a href="{% url 'user-posts' event.author.username %}"><img class="rounded-circle article-img" src="{{ event.author.profile.image.url }}"></a> 
        <small class="text-muted">Organized by <a href="{% url 'user-posts' event.author.username %}">{{ event.author }}</a>  on {{ event.date_posted | date:"F d, Y"}}</small>
        <p></p>
        {% endif %}

    </div>
</article>

